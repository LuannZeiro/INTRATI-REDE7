<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload de PDF</title>
</head>
<body>

    <h1>Enviar PDF</h1>
    
    <!-- Formulário para upload -->
    <form id="uploadForm">
        <label for="pdf">Selecione o arquivo PDF:</label>
        <input type="file" id="pdf" name="pdf" accept="application/pdf" required>
        <br><br>
        <label for="n_termo">Número do Termo:</label>
        <input type="text" id="n_termo" name="n_termo" required>
        <br><br>
        <button type="submit">Enviar PDF</button>
    </form>

    <div id="responseMessage" style="margin-top: 20px;"></div>

    <script>
        // Função para lidar com o envio do formulário
        document.getElementById('uploadForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Previne o envio padrão do formulário

            const formData = new FormData();
            const fileInput = document.getElementById('pdf');
            const termoInput = document.getElementById('n_termo');
            
            // Verifica se um arquivo foi selecionado
            if (fileInput.files.length === 0) {
                alert('Por favor, selecione um arquivo PDF.');
                return;
            }

            formData.append('pdf', fileInput.files[0]);
            formData.append('n_termo', termoInput.value);  // Adiciona o termo ao FormData

            // Envia a requisição POST com o PDF e o número do termo
            fetch('http://172.20.20.127:3000/upload-pdf', {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                // Verifica se a resposta é JSON
                return response.json();
            })
            .then(data => {
                // Exibe a mensagem de sucesso ou erro
                document.getElementById('responseMessage').innerHTML = data.message;
                document.getElementById('responseMessage').style.color = 'green';
            })
            .catch(error => {
                // Exibe a mensagem de erro
                document.getElementById('responseMessage').innerHTML = 'Erro ao enviar o PDF: ' + error.message;
                document.getElementById('responseMessage').style.color = 'red';
            });
        });
    </script>

</body>
</html>
